<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>  

    <label for="code_input">Código</label>
    <input type="text" id="code_input"/>

    <label for="name_input">Nome</label>
    <input type="text" id="name_input"/>

    <label for="year_input">Ano de Nascimento</label>
    <input type="number" id="year_input"/>

    <button onclick="addPerson()">Adicionar</button>
    <section id="container"></section>
</body>
<script>

    const container = document.querySelector("#container")
    const codeInput = document.getElementById("code_input")
    const nameInput = document.getElementById("name_input")
    const yearInput = document.getElementById("year_input")
    
    let people = []

    const render = () => {
        
        container.innerHTML = ""
        
        people.forEach((item, index) => {

            container.innerHTML += `
                <p>
                    ${item.code} - ${item.name} - ${item.year}
                    <button onClick="removePerson('${item.code}')">
                        Remover
                    </button>
                </p>
            `
        })
    }

    const addPerson = () => {

        const code = codeInput.value
        const name = nameInput.value
        const year = yearInput.value


        // Antes de inserir uma nova pessoa no array, 
        // verificar se não tem nenhum item com o mesmo id
        let existe;
        for(let p of people){
            if(p.code === code){
                existe = code;
            }
        }
        if(existe === code){
            alert('Código já existe')
        }else{
            people.push({ code, name, year})
        }
        
        render();
       
    }

    const removePerson = (code) => {
        console.log(code)
        console.log(people)

        
        
        //Remover a pessoa do array cuja o code é o informado
        //Chamar o render novamente para atualizar a view
        render();
    }
</script>
</html>